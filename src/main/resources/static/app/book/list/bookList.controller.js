angular
    .module('bookModule') // getter
    .controller('bookListController', bookListController);

function bookListController($scope, $http) {
    // Init
    clearNewBook();
    $scope.books = [];

    // Public functions

    $http.get("/api/books")
        .then(function (response) {
            $scope.books = response.data;
        });

    $scope.addBook = function () {
        $http.post("/api/books", $scope.newBook).then(function () {
            $scope.books.push($scope.newBook);
            clearNewBook();
        });
    };

    // Private functions

    function clearNewBook() {
        $scope.newBook = {name: ""}; // id should be generated by backend!!!
    }
}